<script>
    document.getElementById('send-btn').addEventListener('click', sendMessage);
    document.getElementById('user-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') sendMessage();
    });

    async function sendMessage() {
        const inputField = document.getElementById('user-input');
        const chatBox = document.getElementById('chat-box');
        const userMessage = inputField.value;

        if (!userMessage) return;

        // Display user message
        chatBox.innerHTML += `<div class="message user"><strong>You:</strong> ${userMessage}</div>`;
        chatBox.scrollTop = chatBox.scrollHeight;

        inputField.value = '';

        // Send request to your updated multilingual API Gateway endpoint
        try {
            const response = await fetch('https://a8lhx0zjp9.execute-api.ap-southeast-2.amazonaws.com/dev/ask', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ prompt: userMessage })
            });

            const data = await response.json();

            // Display bot response
            chatBox.innerHTML += `<div class="message bot"><strong>Bot:</strong> ${data.response}</div>`;
            chatBox.scrollTop = chatBox.scrollHeight;

        } catch (error) {
            console.error('Error:', error);
            chatBox.innerHTML += `<div class="message bot"><strong>Bot:</strong> Sorry, there was an error processing your request.</div>`;
        }
        inputField.value = '';
    }
</script>
